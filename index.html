<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wedding Invitation | KAMBAYASHI IZURU & ITO KINO</title>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600&display=swap');
    :root{
      --bg: #f3f3f1;
      --paper: #ffffff;
      --ink: #1f1b1c;
      --muted:#6b6365;
      --line: rgba(0,0,0,0.10);

      --accent:#c8a3a8;   /* dusty rose */
      --accent2:#b8adaf;  /* greige */
      --accent3:#d7c7b8;  /* dusty beige */

      --shadow: 0 26px 70px rgba(0,0,0,0.14);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      background: var(--bg);
      color: var(--ink);
      line-height: 1.9;
      font-family: ui-serif, "Hiragino Mincho ProN", "Yu Mincho", "Noto Serif JP", serif;
    }

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 0 14px 70px;
    }

    .card{
      background: var(--paper);
      box-shadow: var(--shadow);
      border: 1px solid rgba(0,0,0,0.06);
      border-radius: 18px;
      overflow:hidden;
      margin-top: 16px;
    }

    /* ふわっと表示（グループ） */
    .reveal{ opacity:0; transform: translateY(18px); transition: opacity .9s ease, transform .9s ease; }
    .reveal.is-visible{ opacity:1; transform:none; }

    /* 中身も順番に“ふわっ”と出す（自動スタガー） */
    .reveal-item{
      opacity: 0;
      transform: translateY(18px) scale(0.985);
      transition: opacity .85s ease, transform .85s ease;
      transition-delay: var(--d, 0ms);
      will-change: opacity, transform;
    }
    .is-visible .reveal-item{ opacity: 1; transform:none; }

    /* ちょい違う動き（左右/ぼかし） */
    .reveal-item[data-in="left"]{ transform: translateX(-14px) translateY(10px) scale(0.985); }
    .reveal-item[data-in="right"]{ transform: translateX(14px) translateY(10px) scale(0.985); }
    .is-visible .reveal-item[data-in="left"],
    .is-visible .reveal-item[data-in="right"]{ transform:none; }


    /* HERO：サンプルの雰囲気（写真＋カバー＋配置） */
    .hero{
      position:relative;
      min-height: 520px;
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(200,163,168,0.20), transparent 60%),
        radial-gradient(900px 520px at 110% 10%, rgba(215,199,184,0.18), transparent 58%),
        linear-gradient(#eef1f2, #f6f5f4);
      padding: 30px 18px 34px;
    }

    .hero-inner{
      max-width: 860px;
      margin: 0 auto;
      position: relative;
    }

    .hero-photo{
      position:relative;
      width: min(680px, 100%);
      margin: 0 auto;
      aspect-ratio: 1 / 1;
      border-radius: 26px;
      overflow: visible; /* 影のはみ出しを許可（ブロブを外に出す） */
      background: transparent;
    }

    /* 写真（SVGで切り抜き） */
    .photo-svg{
      position:relative;
      width:100%;
      height:100%;
      display:block;
      filter: drop-shadow(0 18px 40px rgba(0,0,0,0.18));
    }

    .photo-img{ transform-origin: 50% 50%; }

    /* 写真の上に“カバー”（切り抜き形状に追従させるため別レイヤ） */
    .photo-veil{
      position:absolute;
      inset:0;
      pointer-events:none;
      border-radius: 26px;
      /* ここは雰囲気だけ：実体はSVGで切り抜かれている */
      background:
        radial-gradient(110% 80% at 50% 25%, rgba(200,163,168,0.22), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,0.42), rgba(255,255,255,0.10));
      mix-blend-mode: screen;
      opacity: .9;
    }

    /* 水彩っぽい背景ブロブ（写真の外側に“縁”として出す） */
    .blob1, .blob2{
      position:absolute;
      inset:-10% -10%;
      pointer-events:none;
      opacity: .75;
      z-index: 0;
    }

    .blob1{ transform: rotate(-6deg); }
    .blob2{ transform: rotate(10deg); opacity: .55; }

    .hero-photo .photo-svg{ z-index: 2; }
    .hero-photo .photo-veil{ z-index: 3; }

    /* 左下の名前 */
    .hero-names{
      max-width: 860px;
      margin: 18px auto 0;
      color: rgba(70,58,60,0.95);
      letter-spacing: 0.08em;
      font-weight: 600;
      font-size: 22px;
      text-align:left;
      padding: 0 6px;
    }
    .hero-names .and{ font-weight: 400; letter-spacing: 0.18em; opacity: .85; }

    /* 右上の縦日付（03 / 28 / 26 みたいな） */
    .hero-date{
      position:absolute;
      right: 10px;
      top: 10px;
      font-family: ui-serif, "Times New Roman", serif;
      letter-spacing: 0.18em;
      color: rgba(70,58,60,0.88);
      text-align:center;
      user-select:none;
    }
    .hero-date .chunk{ font-size: 30px; line-height: 1.2; }
    .hero-date .line{ width: 22px; height: 1px; background: rgba(70,58,60,0.45); margin: 10px auto; }

    /* セクション共通 */
    .section{
      padding: 54px 18px;
      background: #fff;
      border-top: 1px solid rgba(0,0,0,0.06);
    }

    .section-inner{
      max-width: 860px;
      margin: 0 auto;
    }

    .title{
      text-align:center;
      font-size: 46px;
      font-weight: 500;
      letter-spacing: 0.06em;
      color: rgba(70,58,60,0.85);
      margin: 0 0 18px;
      font-family: "Playfair Display", ui-serif, "Hiragino Mincho ProN", "Yu Mincho", "Noto Serif JP", serif;
    }

    .subtle{
      text-align:center;
      color: var(--muted);
      font-size: 14px;
      letter-spacing: 0.18em;
      margin-bottom: 22px;
      font-family: ui-sans-serif, system-ui, -apple-system, "Hiragino Sans", "Noto Sans JP", sans-serif;
    }

    .message{
      text-align:center;
      max-width: 720px;
      margin: 0 auto;
      color: rgba(35,30,31,0.88);
      font-size: 15px;
      white-space: pre-line;
    }

    .sign{
      margin-top: 24px;
      text-align:center;
      color: rgba(35,30,31,0.75);
      font-size: 14px;
      white-space: pre-line;
    }

    /* COUNTDOWN */
    .countdown-hero{
      position:relative;
      height: 320px;
      border-radius: 14px;
      overflow:hidden;
      background:#000;
      margin: 0 auto 34px;
      border: 1px solid rgba(0,0,0,0.06);
    }
    .countdown-hero img{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit: cover;
      filter: brightness(0.70);
      transform: scale(1.04);
    }
    .countdown-hero .overlay{
      position:absolute; inset:0;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      color:#fff;
      text-align:center;
      padding: 18px;
      text-shadow: 0 2px 14px rgba(0,0,0,0.55);
    }
    .countdown-hero .label{
      font-size: 24px;
      letter-spacing: 0.10em;
      margin-bottom: 10px;
    }
    .countdown-hero .days{
      font-size: 74px;
      line-height: 1;
      margin: 0;
    }
    .countdown-hero .days small{
      font-size: 24px;
      letter-spacing: 0.10em;
      margin-left: 10px;
      opacity: .95;
    }
    .countdown-hero .hms{
      margin-top: 14px;
      display:flex;
      gap: 20px;
      font-family: ui-serif, "Times New Roman", serif;
      letter-spacing: 0.08em;
    }
    .countdown-hero .hms .num{ font-size: 40px; }
    .countdown-hero .hms .cap{ font-size: 12px; opacity: .95; letter-spacing: 0.14em; }

    /* Information（表形式） */
    .info{
      display:grid;
      grid-template-columns: 120px 1fr;
      gap: 12px 18px;
      max-width: 720px;
      margin: 0 auto;
      font-size: 15px;
      color: rgba(35,30,31,0.88);
    }
    .info .k{
      color: rgba(70,58,60,0.70);
      text-align:left;
      letter-spacing: 0.06em;
    }
    .info .v{ text-align:left; }

    /* MAP */
    .map{
      width: min(860px, 100%);
      margin: 0 auto;
      border-radius: 14px;
      overflow:hidden;
      border: 1px solid rgba(0,0,0,0.08);
      background: #f7f7f7;
    }
    .map iframe{ width:100%; height: 360px; border:0; display:block; }

    /* RSVP：サンプルっぽい入力（下線スタイル） */
    .form-wrap{
      max-width: 780px;
      margin: 0 auto;
      color: rgba(35,30,31,0.88);
      font-family: ui-sans-serif, system-ui, -apple-system, "Hiragino Sans", "Noto Sans JP", sans-serif;
    }

    .req{
      display:inline-block;
      font-size: 11px;
      color: #d65b5b;
      border: 1px solid rgba(214,91,91,0.55);
      padding: 1px 6px;
      border-radius: 999px;
      margin-left: 8px;
      transform: translateY(-1px);
    }

    .field{
      margin-top: 22px;
    }

    .field .label{
      text-align:center;
      letter-spacing: 0.10em;
      color: rgba(70,58,60,0.75);
      margin-bottom: 10px;
      font-size: 14px;
    }

    .seg{
      display:flex;
      gap: 14px;
      justify-content:center;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    .seg input{ position:absolute; opacity:0; pointer-events:none; }

    .seg label{
      min-width: 160px;
      text-align:center;
      padding: 12px 16px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.16);
      background: #fff;
      cursor:pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,0.08);
      transition: transform .15s ease, border-color .15s ease, box-shadow .15s ease;
    }

    .seg input:checked + label{
      border-color: rgba(200,163,168,0.95);
      background: rgba(200,163,168,0.95);
      color: #fff;
      box-shadow: 0 12px 26px rgba(200,163,168,0.35);
      transform: translateY(-1px);
      position: relative;
    }

    .seg input:checked + label:after{
      content: "✓";
      position: absolute;
      right: 14px;
      top: 50%;
      transform: translateY(-52%);
      font-weight: 700;
      opacity: 0.95;
    }

    .underline-row{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      margin: 0 auto;
      width: min(540px, 100%);
    }

    @media (min-width: 700px){
      .underline-row.two{ grid-template-columns: 1fr 1fr; }
    }

    .u{
      position:relative;
    }

    .u input, .u textarea, .u select{
      width:100%;
      border: none;
      border-bottom: 1px solid rgba(0,0,0,0.28);
      border-radius: 0;
      padding: 12px 6px 10px;
      font-size: 16px;
      background: transparent;
      outline: none;
    }

    .u input::placeholder, .u textarea::placeholder{ color: rgba(0,0,0,0.28); }

    .u input:focus, .u textarea:focus, .u select:focus{
      border-bottom-color: rgba(200,163,168,0.95);
      box-shadow: 0 10px 0 -9px rgba(200,163,168,0.55);
    }

    .u textarea{ min-height: 120px; resize: vertical; }

    .hint{
      text-align:center;
      color: rgba(70,58,60,0.65);
      font-size: 12px;
      letter-spacing: 0.08em;
      margin-top: 8px;
    }

    .btn{
      margin-top: 30px;
      display:flex;
      justify-content:center;
    }

    button{
      appearance:none;
      border:none;
      border-radius: 999px;
      padding: 16px 44px;
      font-size: 16px;
      letter-spacing: 0.10em;
      background: #fff;
      border: 1px solid rgba(0,0,0,0.24);
      cursor:pointer;
      box-shadow: 0 10px 26px rgba(0,0,0,0.10);
      transition: transform .15s ease, box-shadow .15s ease;
    }
    button:hover{ transform: translateY(-1px); box-shadow: 0 14px 30px rgba(0,0,0,0.14); }

    footer{
      text-align:center;
      color: rgba(0,0,0,0.50);
      font-size: 12px;
      padding: 18px 0 0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Hiragino Sans", "Noto Sans JP", sans-serif;
    }

    /* モバイル調整 */
    @media (max-width: 420px){
      .title{ font-size: 40px; }
      .hero-date .chunk{ font-size: 26px; }
      .countdown-hero .days{ font-size: 62px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="card">

      <!-- HERO / COVER -->
      <section class="hero">
        <div class="hero-inner">
          <div class="hero-date" aria-label="日付">
            <div class="chunk">03</div>
            <div class="line"></div>
            <div class="chunk">28</div>
            <div class="line"></div>
            <div class="chunk">26</div>
          </div>

          <div class="hero-photo reveal" data-parallax="0.22">
            <!-- 水彩ブロブ（背景） -->
            <svg class="blob1" viewBox="0 0 800 800" preserveAspectRatio="none" aria-hidden="true">
              <path d="M165,159 C260,55 420,70 540,140 C660,210 740,360 690,500 C640,640 470,720 330,680 C190,640 90,520 90,380 C90,260 110,210 165,159 Z" fill="rgba(152,206,205,0.35)"/>
            </svg>
            <svg class="blob2" viewBox="0 0 800 800" preserveAspectRatio="none" aria-hidden="true">
              <path d="M210,210 C320,120 470,120 590,210 C710,300 720,460 620,590 C520,720 350,730 230,640 C110,550 110,360 210,210 Z" fill="rgba(200,163,168,0.22)"/>
            </svg>

            <!-- 写真：ブロブ形状で切り抜き（clipPath） -->
            <svg class="photo-svg" viewBox="0 0 800 800" aria-label="表紙写真">
              <defs>
                <clipPath id="clip-photo" clipPathUnits="userSpaceOnUse">
                  <!-- 桜（五弁）っぽい切り抜き形状 -->
                  <path d="
                    M400 120
                    C430 150 470 150 500 135
                    C535 118 575 150 585 195
                    C593 232 560 260 548 278
                    C540 290 548 308 566 318
                    C610 342 630 395 605 435
                    C583 470 545 468 526 464
                    C510 460 496 472 500 490
                    C510 545 470 610 420 595
                    C392 586 390 548 392 528
                    C394 512 380 500 364 506
                    C310 526 245 500 250 450
                    C253 418 288 410 308 408
                    C324 406 334 392 324 378
                    C292 332 305 270 352 258
                    C372 252 392 266 402 278
                    C410 268 428 250 450 252
                    C495 257 508 320 476 366
                    C466 380 476 396 492 398
                    C512 400 548 408 550 440
                    C553 490 488 518 434 498
                    C418 492 404 504 406 520
                    C410 540 408 580 380 590
                    C330 605 290 540 300 485
                    C304 467 290 455 274 459
                    C255 463 217 465 195 430
                    C170 390 190 340 234 316
                    C252 306 260 288 252 276
                    C240 258 207 232 215 195
                    C225 150 265 118 300 135
                    C330 150 370 150 400 120
                    Z
                  "/>
                </clipPath>
              </defs>
              <image class="photo-img" href="photo.jpg" x="0" y="0" width="800" height="800" preserveAspectRatio="xMidYMid slice" clip-path="url(#clip-photo)" />
            </svg>

            <div class="photo-veil" aria-hidden="true"></div>
          </div>

          <div class="hero-names reveal">
            KAMBAYASHI IZURU<br>
            <span class="and">and</span><br>
            ITO KINO
          </div>
        </div>
      </section>

      <!-- MESSAGE -->
      <section class="section reveal">
        <div class="section-inner">
          <h2 class="title">Message</h2>
          <div class="subtle">厳寒の候</div>

          <div class="message">
皆さまいかがお過ごしでしょうか
このたび 私たちは結婚式を挙げることになりました
つきましては ご挨拶をかねて
ささやかなパーティーを催したいと思います
ご多用中 誠に恐縮ではございますが
ぜひご出席いただきたくご案内申し上げます
          </div>

          <div class="sign">敬具
令和8年1月吉日

上林 出
伊藤 樹乃</div>
        </div>
      </section>

      <!-- COUNTDOWN -->
      <section class="section reveal" style="padding-top:0;">
        <div class="section-inner">
          <div class="countdown-hero" aria-label="カウントダウン">
            <img src="photo2.jpg" alt="背景写真" loading="lazy" />
            <div class="overlay">
              <div class="label">COUNT DOWN</div>
              <div class="days"><span id="cd_days">--</span><small>DAYS</small></div>
              <div class="hms">
                <div>
                  <div class="num" id="cd_hours">--</div>
                  <div class="cap">HOURS</div>
                </div>
                <div>
                  <div class="num" id="cd_minutes">--</div>
                  <div class="cap">MINUTES</div>
                </div>
                <div>
                  <div class="num" id="cd_seconds">--</div>
                  <div class="cap">SECONDS</div>
                </div>
              </div>
            </div>
          </div>

          <h2 class="title" style="margin-top: 0;">Information</h2>
          <div class="info">
            <div class="k">日　時</div><div class="v">2026年3月28日（土）</div>
            <div class="k">受　付</div><div class="v">15時00分</div>
            <div class="k">挙　式</div><div class="v">15時30分</div>
            <div class="k">披露宴</div><div class="v">16時30分 開宴</div>
            <div class="k">場　所</div><div class="v">ルミアモーレ</div>
            <div class="k">住　所</div><div class="v">〒105-0022 東京都港区海岸1-11-1 ニューピア竹芝ノースタワー3F</div>
          </div>
        </div>
      </section>

      <!-- MAP -->
      <section class="section reveal" style="padding-top: 0;">
        <div class="section-inner">
          <div class="map">
            <iframe
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              src="https://www.google.com/maps?q=%E3%83%AB%E3%83%9F%E3%82%A2%E3%83%A2%E3%83%BC%E3%83%AC%20%E3%80%92105-0022%20%E6%9D%B1%E4%BA%AC%E9%83%BD%E6%B8%AF%E5%8C%BA%E6%B5%B7%E5%B2%B81-11-1%20%E3%83%8B%E3%83%A5%E3%83%BC%E3%83%94%E3%82%A2%E7%AB%B9%E8%8A%9D%E3%83%8E%E3%83%BC%E3%82%B9%E3%82%BF%E3%83%AF%E3%83%BC3F&z=16&output=embed">
            </iframe>
          </div>

          <div class="message" style="margin-top: 26px;">
お手数ではございますが
ご都合の程を 2026年2月28日 迄に
ご一報賜りますようお願い申し上げます
          </div>
        </div>
      </section>

      <!-- RSVP FORM -->
      <section class="section reveal" style="padding-top: 0;">
        <div class="section-inner">
          <h2 class="title">HOPE</h2>
          <div class="subtle">We request your presence at our party</div>

          <div class="form-wrap">
            <!-- 後で action を Google Apps Script のURLに差し替える -->
            <form action="#" method="post">

              <div class="field">
                <div class="label">ご出欠 <span class="req">必須</span></div>
                <div class="seg" role="radiogroup" aria-label="出欠">
                  <div>
                    <input id="att_yes" type="radio" name="attendance" value="出席" required>
                    <label for="att_yes">ご出席</label>
                  </div>
                  <div>
                    <input id="att_no" type="radio" name="attendance" value="欠席">
                    <label for="att_no">ご欠席</label>
                  </div>
                </div>
              </div>

              <div class="field">
                <div class="label">お名前 <span class="req">必須</span></div>
                <div class="underline-row two">
                  <div class="u"><input name="family_name" type="text" placeholder="姓" required></div>
                  <div class="u"><input name="given_name" type="text" placeholder="名" required></div>
                </div>
              </div>

              <div class="field">
                <div class="label">ご連名</div>
                <div class="hint">※同伴者がいる場合は人数を選択してください（最大4名）</div>
                <div class="underline-row" style="margin-top: 12px;">
                  <div class="u">
                    <select id="companionCount" name="companion_count">
                      <option value="0" selected>同伴者なし</option>
                      <option value="1">同伴者 1名</option>
                      <option value="2">同伴者 2名</option>
                      <option value="3">同伴者 3名</option>
                      <option value="4">同伴者 4名</option>
                    </select>
                  </div>
                </div>

                <div id="companions" style="margin-top: 18px;"></div>
              </div>

              <div class="field">
                <div class="label">アレルギーについて</div>
                <div class="hint">アレルギーなど食べられないものがございましたらご遠慮なくお書き添えください</div>
                <div class="underline-row" style="margin-top: 10px;">
                  <div class="u"><textarea name="allergy" placeholder="例：甲殻類／ナッツ など"></textarea></div>
                </div>
              </div>

              <div class="field">
                <div class="label">メッセージ（任意）</div>
                <div class="underline-row" style="margin-top: 10px;">
                  <div class="u"><textarea name="message" placeholder="ご自由にお書きください"></textarea></div>
                </div>
              </div>

              <div class="btn">
                <button type="submit">招待状に回答する</button>
              </div>

            </form>
          </div>

          <footer>© 2026 KAMBAYASHI IZURU & ITO KINO</footer>
        </div>
      </section>

    </div>
  </div>

  <script>
    // ふわっと表示（IntersectionObserver）
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{
        if(e.isIntersecting){
          e.target.classList.add('is-visible');
          io.unobserve(e.target);
        }
      });
    }, { threshold: 0.14 });
    document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

    // 各セクション内の要素に自動でスタガーアニメーションを付与
    function wireStagger(root){
      const inner = root.querySelector('.section-inner') || root.querySelector('.hero-inner') || root;
      const kids = Array.from(inner.children)
        .filter(el => el.tagName !== 'SCRIPT');

      kids.forEach((el, i) => {
        // すでに reveal / reveal-item が付いているものは維持
        if(!el.classList.contains('reveal-item')) el.classList.add('reveal-item');
        el.style.setProperty('--d', `${Math.min(i, 10) * 90}ms`);
        // たまに左右から
        if(i % 5 === 2) el.setAttribute('data-in','left');
        if(i % 5 === 4) el.setAttribute('data-in','right');
      });
    }

    document.querySelectorAll('.section').forEach(wireStagger);
    wireStagger(document.querySelector('.hero'));

    // 表紙パララックス（写真のみ）
    const heroPhoto = document.querySelector('.hero-photo');
    const heroSvgImg = heroPhoto ? heroPhoto.querySelector('.photo-img') : null;

    function onScroll(){
      if(!heroSvgImg || !heroPhoto) return;
      const rect = heroPhoto.getBoundingClientRect();
      const vh = window.innerHeight;
      const ratio = Math.min(Math.max((vh - rect.top) / (vh + rect.height), 0), 1);
      const offset = (ratio - 0.5) * 24;
      // SVG <image> は style.transform が効きにくいので、属性 transform で動かす
      heroSvgImg.setAttribute('transform', `translate(0 ${offset}) scale(1.06)`);
    }
    window.addEventListener('scroll', onScroll, { passive:true });
    onScroll();

    // COUNTDOWN（2026-03-28 15:00 JST）
    const target = new Date('2026-03-28T15:00:00+09:00').getTime();
    const dEl = document.getElementById('cd_days');
    const hEl = document.getElementById('cd_hours');
    const mEl = document.getElementById('cd_minutes');
    const sEl = document.getElementById('cd_seconds');

    function pad2(n){ return String(n).padStart(2,'0'); }

    function tick(){
      const now = Date.now();
      let diff = Math.max(0, target - now);
      const days = Math.floor(diff / (24*60*60*1000));
      diff -= days * (24*60*60*1000);
      const hours = Math.floor(diff / (60*60*1000));
      diff -= hours * (60*60*1000);
      const mins = Math.floor(diff / (60*1000));
      diff -= mins * (60*1000);
      const secs = Math.floor(diff / 1000);

      if(dEl) dEl.textContent = days;
      if(hEl) hEl.textContent = pad2(hours);
      if(mEl) mEl.textContent = pad2(mins);
      if(sEl) sEl.textContent = pad2(secs);
    }
    tick();
    setInterval(tick, 1000);

    // 同伴者：人数分の「名前・アレルギー」入力欄を生成
    (function(){
      const countEl = document.getElementById('companionCount');
      const wrap = document.getElementById('companions');
      if(!countEl || !wrap) return;

      function companionBlock(i){
        const box = document.createElement('div');
        box.style.marginTop = '18px';

        const head = document.createElement('div');
        head.className = 'hint';
        head.style.marginTop = '0';
        head.style.marginBottom = '10px';
        head.textContent = `同伴者${i}`;
        box.appendChild(head);

        const row1 = document.createElement('div');
        row1.className = 'underline-row two';

        const u1 = document.createElement('div');
        u1.className = 'u';
        const in1 = document.createElement('input');
        in1.name = `companion_${i}_name`;
        in1.type = 'text';
        in1.placeholder = `同伴者${i} お名前`;
        in1.required = true;
        u1.appendChild(in1);

        const u2 = document.createElement('div');
        u2.className = 'u';
        const in2 = document.createElement('input');
        in2.name = `companion_${i}_allergy`;
        in2.type = 'text';
        in2.placeholder = `同伴者${i} アレルギー（任意）`;
        u2.appendChild(in2);

        row1.appendChild(u1);
        row1.appendChild(u2);
        box.appendChild(row1);

        return box;
      }

      function render(){
        const n = parseInt(countEl.value || '0', 10);
        wrap.innerHTML = '';
        if(!n) return;
        for(let i=1;i<=n;i++) wrap.appendChild(companionBlock(i));
      }

      countEl.addEventListener('change', render);
      render();
    })();
  </script>
</body>
</html>
